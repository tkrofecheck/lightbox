<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Lightbox</title>
        <meta name="description" content="Lightbox application to display photos pulled in with Google API">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="./src/lightbox.css" rel="stylesheet"/>

        <style>
            /* External stylesheet may not be available for connection test
            *  Keep style embedded
            */
            .connection {
                position: relative;
                display: table;
                width: auto;
                height: auto;
                font-family: 'Verdana', sans-serif;
                color: #000000;
                text-transform: uppercase;
            }

            .connection span {
                display: table-cell;
                vertical-align: middle;
            }
            
            .connection .dot {
                display: block;
                width: 20px;
                height: 20px;
                border-radius: 10px;
                background-color: yellow;
                transition: background .5s ease-in-out;
            }

            .connection.online .dot {
                background-color: green;
            }

            .connection.offline .dot {
                background-color: red;
            }

            .connection .message:after {
                position: relative;
                left: 5px;
            }

            .connection.online .message:after {
                content: 'connected';
            }

            .connection.offline .message:after {
                content: 'no internet connection!';
            }
        </style>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div class="connection">
            <span class="dot"></span>
            <span class="message"></span>
        </div>

        <div id="container">
            <label for="gallerySelector">Halloween Galleries</label>
            <select name="gallerySelector" onchange="Gallery.render(this.value)">
                <option value="" selected="selected">Select a Gallery</option>
                <option value="custom">Custom Search</option>
                <option value="halloween+pumpkin">Pumpkin</option>
                <option value="halloween+witch">Witch</option>
                <option value="halloween+ghost">Ghost</option>
                <option value="halloween+scarecrow">Scarecrow</option>
                <option value="halloween+clown">Clown</option>
            </select>
            <form name="customSearch" onsubmit="Gallery.render(this)">
                <input type="text" name="search" placeholder="Image Search"/>
                <input type="submit" name="submit" value="Submit"/>
            </form>
            <button class="clear-storage">Clear Search History</button>
            <div id="gallery"></div>
        </div>
        <script type="text/javascript">
            //Monitor network connection
            (function () {
                var connection = document.querySelector('.connection');
                var formElements = document.getElementById('container').querySelectorAll('input,select,button');

                function connectionStatus() {
                    var status = navigator.onLine ? 'online' : 'offline';
                    var disabled = (status === 'offline');

                    connection.className = 'connection ' + status;

                    if (status === 'offline') {
                        dropdown.setAttribute('disabled', true);
                    } else {
                        dropdown.removeAttribute('disabled');
                    }
                }

                window.addEventListener('load', connectionStatus);
                window.addEventListener('online', connectionStatus);
                window.addEventListener('offline', connectionStatus);
            })();
        </script>

        <script src="./src/lightbox.js"></script>
        <script type="text/javascript">
            /* Use the same instance in the above drop-down selector
            *  -- e.g. Gallery.render(this.value)
            */
            var Gallery = new Lightbox();
        </script>
    </body>
</html>