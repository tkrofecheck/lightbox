<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Lightbox</title>
        <meta name="description" content="Lightbox application to display photos pulled in with Google API">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="./src/lightbox.css" rel="stylesheet"/>

        <style>
            /* External stylesheet may not be available for connection test
            *  Keep style embedded
            */
            .connection {
                position: relative;
                display: table;
                width: auto;
                height: auto;
                font-family: 'Verdana', sans-serif;
                color: #000000;
                text-transform: uppercase;
            }

            .connection span {
                display: table-cell;
                vertical-align: middle;
            }
            
            .connection .dot {
                display: block;
                width: 20px;
                height: 20px;
                border-radius: 10px;
                background-color: yellow;
                transition: background .5s ease-in-out;
            }

            .connection.online .dot {
                background-color: green;
            }

            .connection.offline .dot {
                background-color: red;
            }

            .connection .message:after {
                position: relative;
                left: 5px;
            }

            .connection.online .message:after {
                content: 'connected';
            }

            .connection.offline .message:after {
                content: 'no internet connection!';
            }
        </style>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div id="container">
            <div class="search">
                <div class="connection">
                    <span class="dot"></span>
                    <span class="message"></span>
                </div>

                <h1>Image Search</h1>

                <div class="search-type">
                    <div class="types">
                        <div>Preset</div>
                        <div>Custom</div>
                    </div>
                    <div class="preset">
                        <label for="gallerySelector">Gallery 1</label>
                        <select name="gallerySelector" onchange="Gallery.preset(this.value)">
                            <option value="" selected="selected">Halloween</option>
                            <option value="">-------------------------</option>
                            <option value="halloween+pumpkin">Pumpkin</option>
                            <option value="halloween+witch">Witch</option>
                            <option value="halloween+ghost">Ghost</option>
                            <option value="halloween+scarecrow">Scarecrow</option>
                            <option value="halloween+clown">Clown</option>
                            <option value="">-------------------------</option>
                        </select>
                        <label for="gallerySelector2">Gallery 2</label>
                        <select name="gallerySelector2" onchange="Gallery2.preset(this.value)">
                            <option value="" selected="selected">New York City</option>
                            <option value="">-------------------------</option>
                            <option value="nyc+statue+of+liberty">Statue of Liberty</option>
                            <option value="nyc+times+square">Times Square</option>
                            <option value="nyc+empire+state+building">Empire State Building</option>
                            <option value="nyc+central+park">Central Park</option>
                            <option value="nyc+city+hall">City Hall</option>
                            <option value="">-------------------------</option>
                        </select>
                        <label for="gallerySelector3">Gallery 3</label>
                        <select name="gallerySelector3" onchange="Gallery3.preset(this.value)">
                            <option value="" selected="selected">Food</option>
                            <option value="">-------------------------</option>
                            <option value="food+pizza">Pizza</option>
                            <option value="food+cheeseburger">Cheeseburger</option>
                            <option value="food+salad">Salad</option>
                            <option value="food+fruit">Fruit</option>
                            <option value="food+bread">Bread</option>
                            <option value="">-------------------------</option>
                        </select>
                    </div>
                    <div class="custom hide">
                        <form name="customSearch" onsubmit="Gallery.custom(this)">
                            <input type="text" name="search" placeholder="Image Search" />                
                            <input type="submit" value="Search" />
                        </form>
                    </div>
                    <button class="clear-storage">Clear Search History</button>
                </div>
            </div>
            <div class="gallery"></div>
            <div class="gallery2"></div>
        </div>
        <script type="text/javascript">
            //Monitor network connection
            (function () {
                var connection = document.querySelector('.connection');
                var formElements = document.getElementById('container').querySelectorAll('input,select,button');

                function connectionStatus() {
                    var status = navigator.onLine ? 'online' : 'offline';
                    var disabled = (status === 'offline');

                    connection.className = 'connection ' + status;

                    if (status === 'offline') {
                        formElements.forEach(function(node) {
                            node.setAttribute('disabled', true);
                        });
                    } else {
                        formElements.forEach(function(el) {
                            el.removeAttribute('disabled');
                        });
                    }
                }

                window.addEventListener('load', connectionStatus);
                window.addEventListener('online', connectionStatus);
                window.addEventListener('offline', connectionStatus);
            })();
        </script>

        <script src="./src/lightbox.js"></script>
        <script type="text/javascript">
            /* Use the same instance name (set below) in the above drop-down selector
            *  -- e.g. Gallery.render(this.value)
            * NOTE: Multiple instances are supported, but DOM must be updated with
            *       second instance name and new instance must use correct selector
            */
            var apiKeys = [
                    'AIzaSyCfE0Su_1tdA-u36iZIjmNIgSm3XnV56Cc',
                    'AIzaSyAVGFZDgKUNvMMjLi5I4uS0f0ag6ETGHLw',
                    'AIzaSyCaecX-9H4ptKaqzJm0jx0aRjLKDNEuiG4'
                ],
                Gallery,
                Gallery2,
                Gallery3;
            
            // Instance 1
            Gallery = new Lightbox(apiKeys);
            Gallery.init('.gallery');

            // Instance 2 (only available using 'Preset' dropdowns at this time)
            Gallery2 = new Lightbox(apiKeys);
            Gallery2.init('.gallery2');

            // Instance 3 (missing HTML element - error displayed in console)
            Gallery3 = new Lightbox(apiKeys);
            Gallery3.init('.gallery3');
        </script>
    </body>
</html>